<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>í¬ì¸íŠ¸ìƒµ</title>
    <link rel="stylesheet" href="/ë©”ì¸í˜ì´ì§€/ë©”ì¸í™”ë©´_header_bottom.css">
    <link href="../ë©”ì¸í˜ì´ì§€/ì•„ì´ëŒë´„ì„œë¹„ìŠ¤_ë©”ì¸í˜ì´ì§€.css" rel="stylesheet" />
    <link rel="stylesheet" href="/ê²Œì‹œíŒ/ì•„ì´ëŒë´„ì‚¬ì—…/ì•„ì´ëŒë´„ì‚¬ì—…ì†Œê°œ.css">
    <link rel="stylesheet" href="í¬ì¸íŠ¸ìƒµ.css">
    <script src="/_í—¤ë”/jquery-3.7.1.min.js"></script>

</head>

<body>

    <!-- 1. í—¤ë” -->
    <header>
        <div class="logo-area">
            <img alt="ì•„ì´ëŒë´„ ë¡œê³ " src="/img/ì•„ì´ëŒë´„ì„œë¹„ìŠ¤-ë©”ì¸ë¡œê³ .png">
            <a href="/ë©”ì¸í˜ì´ì§€/ë©”ì¸í˜ì´ì§€.html"><span>ì•„ì´ ëŒë´„ ì„œë¹„ìŠ¤</span></a>
        </div>

        <nav>
            <ul class="menu">
                <li class="menu-item">
                    <a href="/ê²Œì‹œíŒ/ì•„ì´ëŒë´„ì‚¬ì—…/ì•„ì´ëŒë´„ì‚¬ì—…ì†Œê°œ.html">ì•„ì´ ëŒë´„ ì‚¬ì—…</a>
                    <ul class="submenu">
                        <li><a href="/ê²Œì‹œíŒ/ì•„ì´ëŒë´„ì‚¬ì—…/ì•„ì´ëŒë´„ì‚¬ì—…ì†Œê°œ.html">ì•„ì´ ëŒë´„ ì‚¬ì—…ì†Œê°œ</a></li>
                        <li><a href="/ë¯¸ì™„ì„±í˜ì´ì§€.html">ì•„ì´ ëŒë´„ ì‚¬ì—…í˜„í™©</a></li>
                        <li><a href="/ê²Œì‹œíŒ/ì•„ì´ëŒë´„ì‚¬ì—…/ì„œë¹„ìŠ¤ìœ í˜•ì†Œê°œ.html">ì„œë¹„ìŠ¤ ìœ í˜• ì†Œê°œ</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a href="/ê²Œì‹œíŒ/ì•„ì´ëŒë´„ì‚¬ì—…/ì„œë¹„ìŠ¤ì‹ ì²­ì•ˆë‚´.html">ì„œë¹„ìŠ¤ ì´ìš©</a>
                    <ul class="submenu">
                        <li><a href="/ê²Œì‹œíŒ/ì•„ì´ëŒë´„ì‚¬ì—…/ì„œë¹„ìŠ¤ì‹ ì²­ì•ˆë‚´.html">ì •ë¶€ì§€ì› ì‹ ì²­ì•ˆë‚´</a></li>
                        <li><a href="/ë¯¸ì™„ì„±í˜ì´ì§€.html">ì‹ ì²­ ì „ ì‚¬ì „ ì¤€ë¹„ì•ˆë‚´</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a href="/ê²Œì‹œíŒ/ì•„ì´ëŒë´„ì‚¬ì—…/ìì£¼í•˜ëŠ”ì§ˆë¬¸.html">ì •ë³´ë§ˆë‹¹</a>
                    <ul class="submenu">
                        <li><a href="/ë¯¸ì™„ì„±í˜ì´ì§€.html">ê³µì§€ì‚¬í•­</a></li>
                        <li><a href="/ê²Œì‹œíŒ/ì•„ì´ëŒë´„ì‚¬ì—…/ìì£¼í•˜ëŠ”ì§ˆë¬¸.html">ìì£¼í•˜ëŠ” ì§ˆë¬¸</a></li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a href="/ê²Œì‹œíŒ/ììœ ê²Œì‹œíŒ/ììœ ê²Œì‹œíŒ.html">ììœ ê²Œì‹œíŒ</a>
                </li>

            </ul>
        </nav>

        <div class="user-area">
            <div class="translate-wrapper">
                <button id="translateBtn">
                    <img src="/img/ë²ˆì—­ë²„íŠ¼.png" style="width: 24px; height: 24px;">
                </button>
                <div id="languageDropdown" class="language-box hidden">
                    <div class="lang-option" id='lang-kr' onclick="setLanguage('kr')">K R</div>
                    <div class="lang-option" id='lang-en' onclick="setLanguage('en')">E N</div>
                    <div class="lang-option" id='lang-cn' onclick="setLanguage('cn')">C N</div>
                </div>
            </div>

            <form class="search-form" onsubmit="handleSearch(event)">
                <input type="text" class="search-box" placeholder="search...." id="searchInput" />
                <button type="submit" class="search-btn">
                    <i class="fas fa-search"></i>
                </button>
            </form>

            <div id="google_translate_element"></div>

            <a href="/ë¡œê·¸ì¸/ë¡œê·¸ì¸.html" id="login-link">
                <button class="login-btn">ë¡œê·¸ì¸</button>
            </a>
            <div id="user-info" style="display: none;">
                <a href="/ë§ˆì´í˜ì´ì§€(ì‚¬ìš©ì)/ë§ˆì´í˜ì´ì§€(ì‚¬ìš©ì).html">
                    <strong id="user-name">ì‚¬ìš©ì</strong>
                    <!-- <div class="user-avatar">ğŸ‘¤</div> -->
                    <div class="user-avatar">ğŸ‘§ğŸ»</div>
                </a>
                <button class="logout-btn" onclick="handleLogout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="title">í¬ì¸íŠ¸ìƒµ</div>

        <div style="text-align: center; margin-bottom: 16px;">
            ë‚´ ë³´ìœ  í¬ì¸íŠ¸: <strong id="myPoints">129300</strong>P
        </div>

        <div class="grid" id="product-grid"></div>

        <div class="bottom-button">
            <button id="showMoreBtn">ìƒí’ˆ ì „ì²´ ë³´ê¸° â†’</button>
        </div>
    </div>

    <!-- ëª¨ë‹¬ -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">ìƒí’ˆëª…</h3>
            <p id="modalPrice">ê°€ê²©</p>
            <button onclick="closeModal()">í™•ì¸</button>
        </div>
    </div>

    <!-- 3. í‘¸í„° -->
    <div id="footer"></div>

    <script>
        $(function () {
            $('#footer').load("/_í‘¸í„°/í‘¸í„°.html");
        })
    </script>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        let myPoints = 129300;

        const productList = [
            { name: "CU ìƒí’ˆê¶Œ", original: 5000, discount: 4750, image: "cuìƒí’ˆê¶Œ.jfif" },
            { name: "ë°°ë¯¼ ìƒí’ˆê¶Œ", original: 10000, discount: 9500, image: "ë°°ë¯¼ìƒí’ˆê¶Œ.png" },
            { name: "ë¬¸í™”ìƒí’ˆê¶Œ", original: 5000, discount: 4750, image: "ë¬¸í™”ìƒí’ˆê¶Œ 5ì²œì›.jfif" },
            { name: "ë„¤ì´ë²„í˜ì´ í¬ì¸íŠ¸", original: 5000, discount: 4750, image: "ë„¤ì´ë²„í˜ì´ 5ì²œì›.png" },
            { name: "êµë³´ë¬¸ê³  ìƒí’ˆê¶Œ", original: 10000, discount: 9500, image: "êµë³´ë¬¸ê³  ìƒí’ˆê¶Œ.png" },
            { name: "ì˜¬ë¦¬ë¸Œì˜ ìƒí’ˆê¶Œ", original: 10000, discount: 9500, image: "ì˜¬ë¦¬ë¸Œì˜ ìƒí’ˆê¶Œ.jfif" },
            { name: "GS25 ìƒí’ˆê¶Œ", original: 5000, discount: 4750, image: "gs25.jfif" },
            { name: "ìŠ¤íƒ€ë²…ìŠ¤ ì¹´ë“œ", original: 10000, discount: 9500, image: "ìŠ¤íƒ€ë²…ìŠ¤ ë§Œì›ê¶Œ.jfif" },
            { name: "ì´ë§ˆíŠ¸24 ìƒí’ˆê¶Œ", original: 5000, discount: 4750, image: "ì´ë§ˆíŠ¸24ìƒí’ˆê¶Œ.jfif" }
        ];

        const productGrid = document.getElementById("product-grid");

        productList.forEach((product, index) => {
            const card = document.createElement("div");
            card.classList.add("card");

            const img = document.createElement("img");
            img.src = `../Pointshopimg/${product.image}`;
            img.alt = product.name;
            img.className = "image-placeholder";

            const name = document.createElement("div");
            name.className = "product-name";
            name.textContent = product.name;

            const price = document.createElement("div");
            price.className = "price";
            price.innerHTML = `<del>${product.original.toLocaleString()}ì›</del> <span class="discounted">${product.discount.toLocaleString()}ì›</span>`;

            const button = document.createElement("button");
            button.className = "buy-button";
            button.textContent = "êµ¬ë§¤";

            if (myPoints < product.discount) {
                button.disabled = true;
            } else {
                button.addEventListener("click", () => buyProduct(product.name, product.discount, button));
            }

            card.appendChild(img);
            card.appendChild(name);
            card.appendChild(price);
            card.appendChild(button);
            productGrid.appendChild(card);
        });

        function buyProduct(name, price, buttonElement) {
            // SweetAlert í™•ì¸ì°½
            Swal.fire({
                title: `${name}ì„(ë¥¼) êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`,
                text: `ê°€ê²©: ${price.toLocaleString()}P`,
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'êµ¬ë§¤',
                cancelButtonText: 'ì·¨ì†Œ'
            }).then((result) => {
                if (result.isConfirmed) {
                    // í¬ì¸íŠ¸ ì°¨ê°
                    myPoints -= price;
                    document.getElementById("myPoints").textContent = myPoints;

                    // ë²„íŠ¼ ë¹„í™œì„±í™”
                    buttonElement.disabled = true;
                    buttonElement.style.backgroundColor = "#ccc";
                    buttonElement.style.cursor = "not-allowed";

                    // ì„±ê³µ ì•Œë¦¼
                    Swal.fire({
                        icon: 'success',
                        title: 'êµ¬ë§¤ ì™„ë£Œ!',
                        text: `${name}ì„(ë¥¼) ì„±ê³µì ìœ¼ë¡œ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤.`,
                        confirmButtonColor: '#32a37b'
                    });
                }
            });
        }

        document.getElementById("showMoreBtn").addEventListener("click", () => {
            document.querySelectorAll(".card.hidden").forEach(card => card.classList.remove("hidden"));
            document.getElementById("showMoreBtn").style.display = "none";
        });

        function closeModal() {
            document.getElementById("modal").style.display = "none";
        }
    </script>

    <script src="/ë²ˆì—­api/translate.js"></script>
    <script src="/ë¡œê·¸ì¸/ê³µí†µë¡œê·¸ì¸ê¸°ëŠ¥.js"></script>
    <script src="/ë©”ì¸í˜ì´ì§€/ë©”ì¸í˜ì´ì§€.js"></script>
</body>

</html>